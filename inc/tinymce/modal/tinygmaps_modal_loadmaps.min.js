function seed_vars(){lat=jQuery("input#mapLat").val(),lng=jQuery("input#mapLng").val(),mapZoomReturn=parseInt(jQuery("select[id=mapZoom]").val(),10),mapWidthReturn=jQuery("input[id=mapWidth]").val(),mapHeightReturn=jQuery("input[id=mapHeight]").val(),mapTypeReturn=jQuery("select[id=mapType]").val(),locGooglePlaceID=jQuery("input#locGooglePlaceID").val(),mapAddressReturn=jQuery("input[id=mapAddress]").val(),locName=jQuery("input#locName").val(),locPhone=jQuery("input#locPhone").val(),locStreet=jQuery("input#locStAdr").val(),locCity=jQuery("input#locCity").val(),locRegion=jQuery("input#locRegion").val(),locPostcode=jQuery("input#locPostcode").val(),locCountry=jQuery("input#locCountry").val(),locWeb=jQuery("input#locWebsite").val(),locIcon=jQuery("input#locIconURL").val(),mapMarkerImageReturn=get_marker_image(),mapInfoWindowReturn=clean_html(jQuery("textarea[id=mapInfoWindow]").val()),mapControlsReturn="true"==jQuery("select[id=mapControls]").val()}function get_marker_image(){switch(mapMarkerReturn=jQuery("select[id=mapMarker]").val()){case"concert":mapMarkerImageReturn=markerCustom;break;case"default":mapMarkerImageReturn="";break;case"custom":mapMarkerImageReturn=jQuery("#mapMarkerImage").val()}return mapMarkerImageReturn}function custom_location(){jQuery("#mapAddress").val(""),jQuery("#locGooglePlaceID").val(""),jQuery("#locIconURL").val(""),jQuery("#mapLat").val(""),jQuery("#mapLng").val("")}function initialize(e){function o(e){jQuery(e).find("input, textarea").first()}function t(e,o){o+=" alert",jQuery("#search-report").each(function(){jQuery(this).addClass(o),jQuery(this).width(jQuery(this).parent().width()-15),jQuery(this).append(e),jQuery("#search-report").fadeIn(800).delay(300).fadeOut(800,function(){jQuery(this).removeClass(o).empty()})})}function n(){seed_vars(),""!==lat&&""!==lng?initCenter=new google.maps.LatLng(lat,lng):initCenter=new google.maps.LatLng(43.703793,-72.326187),mapOptions={center:initCenter,zoom:mapZoomReturn,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,streetViewControl:!1,panControl:!1,disableDefaultUI:mapControlsReturn},map=new google.maps.Map(document.getElementById("map_canvas"),mapOptions),i(),marker=new google.maps.Marker({position:initCenter,map:map,icon:mapMarkerImageReturn}),infowindowPlace=get_info_bubble(locIcon,locName,locStreet,locCity,locRegion,locPostcode,locCountry,locPhone,locWeb,mapInfoWindowReturn),e.setContent(infowindowPlace),""!==locName&&e.open(map,marker),google.maps.event.addListener(marker,"click",function(){""!==locName&&e.open(map,marker)}),a()}function a(){google.maps.event.addDomListener(document.getElementById("locName"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("locPhone"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("locStAdr"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("locCity"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("locRegion"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("locPostcode"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("locCountry"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("locWebsite"),"change",custom_location),google.maps.event.addDomListener(document.getElementById("lookup-detials"),"click",y),google.maps.event.addDomListener(document.getElementById("map-update"),"click",m),google.maps.event.addDomListener(document.getElementById("mapControls"),"change",n),google.maps.event.addDomListener(document.getElementById("mapType"),"change",i),google.maps.event.addListener(map,"maptypeid_changed",s),google.maps.event.addDomListener(document.getElementById("mapInfoWindow"),"change",m),google.maps.event.addDomListener(document.getElementById("mapInfoWindow"),"click",u),setInterval(function(){d(jQuery("#mapInfoWindow").val())},100),google.maps.event.addDomListener(document.getElementById("mapMarker"),"change",p),google.maps.event.addDomListener(document.getElementById("mapMarkerImage"),"change",p),google.maps.event.addDomListener(document.getElementById("mapZoom"),"change",r),google.maps.event.addListener(f,"place_changed",g),google.maps.event.addListener(map,"zoom_changed",c),l()}function l(){google.maps.event.addListener(marker,"click",function(){""!==mapInfoWindowReturn&&e.open(map,marker)})}function r(){mapZoomReturn=parseInt(jQuery("select[id=mapZoom]").val(),10),mapCurrCenter=map.getCenter(),map.setZoom(mapZoomReturn),map.setCenter(mapCurrCenter)}function c(){var e=map.getZoom();mapCurrCenter=map.getCenter(),map.setCenter(mapCurrCenter),jQuery("select[id=mapZoom] option").filter(function(){return jQuery(this).text()==e}).prop("selected",!0)}function i(){mapTypeReturn=jQuery("select[id=mapType]").val(),"ROADMAP"==mapTypeReturn&&map.setMapTypeId(google.maps.MapTypeId.ROADMAP),"SATELLITE"==mapTypeReturn&&map.setMapTypeId(google.maps.MapTypeId.SATELLITE),"HYBRID"==mapTypeReturn&&map.setMapTypeId(google.maps.MapTypeId.HYBRID),"TERRAIN"==mapTypeReturn&&map.setMapTypeId(google.maps.MapTypeId.TERRAIN)}function s(){var e=map.getMapTypeId();e=e.toUpperCase(),jQuery("select[id=mapType] option").filter(function(){return jQuery(this).text()==e}).prop("selected",!0)}function m(){seed_vars(),mapInfoWindowReturn=clean_html(jQuery("textarea#mapInfoWindow").val()),infowindowPlace=get_info_bubble(locIcon,locName,locStreet,locCity,locRegion,locPostcode,locCountry,locPhone,locWeb,mapInfoWindowReturn),e.setContent(infowindowPlace),jQuery("textarea#mapInfoWindow").prop("disabled",!0).addClass("highlight alert").delay(700).show(1,function(){jQuery(this).val(mapInfoWindowReturn).removeClass("highlight alert").prop("disabled",!1),jQuery(this)[0].selectionStart=jQuery(this)[0].selectionEnd=jQuery(this).val().length})}function u(){if(jQuery("#mapInfoWindow").is(":visible")){!jQuery(".marker-extras").length>0&&(seed_vars(),infowindowPlace=get_info_bubble(locIcon,locName,locStreet,locCity,locRegion,locPostcode,locCountry,locPhone,locWeb,"..."),e.setContent(infowindowPlace));var o=null;jQuery("#mapInfoWindow").live("keydown",function(e){o&&clearTimeout(o),o=setTimeout(m,2500)})}e.open(map,marker)||e.open(map,marker)}function d(e){var o=jQuery(".marker-extras").html();o!==e&&(o=clean_html(e)),jQuery(".marker-extras").html(o)}function p(){markerImage=get_marker_image(),marker.setIcon(markerImage),null!==locPlace?marker.setPosition(locPlace.geometry.location):"",marker.setMap(map)}function g(){if(e.close(),v.className="",locPlace=f.getPlace(),console.log(locPlace),!locPlace.geometry)return void(v.className="notfound");if(locPlace.geometry.viewport?(map.fitBounds(locPlace.geometry.viewport),mapCurrCenter=map.getCenter()):(map.setCenter(locPlace.geometry.location),map.setZoom(parseFloat(mapZoomReturn)),mapCurrCenter=map.getCenter()),locPlace.address_components){locName="",locStreetNum="",locStreet="",locCity="",locRegion="",locPostcode="",locCountry="",locIcon="",locPhone="",locWeb="",lat="",lng="",locGooglePlaceID="",locGooglePlaceID=locPlace.place_id?locPlace.place_id:"",jQuery("#locGooglePlaceID").val(locGooglePlaceID.trim()),lat=locPlace.geometry.location.lat(),jQuery("#mapLat").val(lat),lng=locPlace.geometry.location.lng(),jQuery("#mapLng").val(lng),locName=locPlace.name,jQuery("#locName").val(locName),locIcon=locPlace.icon,jQuery("#locIconURL").val(locIcon.trim()),locPhone=locPlace.formatted_phone_number,jQuery("#locPhone").val(locPhone),locWeb=locPlace.website,jQuery("#locWebsite").val(locWeb);var o=processObject("premise",locPlace.address_components);locStreetNum=processObject("street_number",locPlace.address_components),locStreet=processObject("route",locPlace.address_components),o?o+=", ":"";var t=(o+locStreetNum+" "+locStreet).trim();jQuery("input#locStAdr").val(t),processObject("administrative_area3",locPlace.address_components)&&(locCity=processObject("administrative_area3",locPlace.address_components)),processObject("locality",locPlace.address_components)&&(locCity=processObject("locality",locPlace.address_components)),processObject("sublocality",locPlace.address_components)&&(locCity=processObject("sublocality",locPlace.address_components)),processObject("postal_town",locPlace.address_components)&&(locCity=processObject("postal_town",locPlace.address_components)),jQuery("input#locCity").val(locCity.trim()),locRegion=processObject("administrative_area_level_1",locPlace.address_components),locRegion||(locRegion=processObject("administrative_area_level_2",locPlace.address_components)),""===locRegion&&null===locRegion||""!=locRegion&&null!=locRegion||(locRegion=locRegion),jQuery("#locCity").val(locCity.trim()),jQuery("#locRegion").val(locRegion.trim()),locPostcode=processObject("postal_code",locPlace.address_components),jQuery("#locPostcode").val(locPostcode),locCountry=processObject("country",locPlace.address_components),jQuery("#locCountry").val(locCountry),locAddress=locStreet+", "+locCity+", "+locRegion+", "+locPostcode+", "+locCountry}n()}function y(){function e(e){geocoder.geocode({address:locAddress},function(o,n){if(n!==google.maps.GeocoderStatus.OK){var a="Sorry, try adding more address details: "+n;t(a,"warning")}if(n==google.maps.GeocoderStatus.OK){locPlace=o[0];var l=locPlace.address_components;locName="",locStreetNum="",locStreet="",locCity="",locRegion="",locRegion="",locPostcode="",locCountry="",locIcon="",locGooglePlaceID="",locName=processObject("point_of_interest",locPlace.address_components),""!==locName&&null!==locName&&jQuery("#locName").val(locName.trim());var r=processObject("premise",locPlace.address_components);locStreetNum=processObject("street_number",locPlace.address_components),locStreet=processObject("route",locPlace.address_components),r?r+=", ":"";var c=(r+locStreetNum+" "+locStreet).trim();jQuery("input#locStAdr").val(c),locCity=processObject("postal_town",locPlace.address_components),locCity||(locCity=processObject("locality",locPlace.address_components)),jQuery("input#locCity").val(locCity),locRegion=processObject("administrative_area_level_1",locPlace.address_components),locRegion||(locRegion=processObject("administrative_area_level_2",locPlace.address_components)),jQuery("input#locRegion").val(locRegion),locPostcode=processObject("postal_code",locPlace.address_components),jQuery("input#locPostcode").val(locPostcode),locCountry=processObject("country",locPlace.address_components),jQuery("input#locCountry").val(locCountry),lat=locPlace.geometry.location.lat(),jQuery("input#mapLat").val(lat),lng=locPlace.geometry.location.lng(),jQuery("input#mapLng").val(lng);var a="Geocoding sucessfull,  Lng & Lat status: "+n;t(a,"confirm"),seed_vars(),e()}})}return jQuery("#search-report").is(":animated")?!1:(custom_location(),seed_vars(),locAddress=locName+"+"+locStreet+"+"+locCity+"+"+locRegion+"+"+locPostcode+"+"+locCountry,geocoder=new google.maps.Geocoder,e(function(){n()}),void 0)}jQuery(document).ready(function($){jQuery(".noEnterSubmit").keypress(function(e){return 13==e.which?!1:void 0}),o(jQuery(this)),jQuery(".accordion").hide(),jQuery(".heading").click(function(){return jQuery(this).next().find(".accordion").hasClass("open")?void jQuery(this).next().find(".open").removeClass("open active").slideUp(function(){jQuery("#button-dialog form").find("input:text").first().trigger("focus")}):(jQuery(".heading").not(this).next(".group").find(".accordion").slideUp(function(){jQuery(this).removeClass("open active"),o(jQuery(this))}),void jQuery(this).next().find(".accordion").slideDown(400,function(){o(jQuery(this)),jQuery(this).addClass("open active")}))}),jQuery('input[name="custom_use_address_check"]').click(function(){jQuery(this).is(":checked")&&jQuery("#mapAddress-group").slideUp(400,function(){jQuery("#address_extras").find("input:text, button").addClass("active highlight").prop("disabled",!1).delay(700).show(1,function(){jQuery(this).removeClass("highlight")}),jQuery("#locName").trigger("focus")}),0==jQuery(this).is(":checked")&&(jQuery("#mapAddress-group").slideDown(),jQuery("#address_extras").find("input:text, button").prop("disabled",!0).val("").removeClass("active"),jQuery(".autoMapAddress").parent().slideDown(400,function(){o(jQuery(this)),n()}))}),0==parent.tinygmaps.haveGPlaces_key?(jQuery("#tinygmaps.haveGPlaces_key").remove(),jQuery("#address_extras").show(),jQuery("#address_extras").find("input:text, button").prop("disabled",!1)):jQuery("#address_extras").find("input:text, button").prop("disabled",!0),jQuery(".mapMarkerImage_wrap").hide(),jQuery("#mapMarker").change(function(){var e=$("#mapMarker option:selected").text();"Custom"===e?(jQuery(".mapMarkerImage_wrap").slideDown(),o(jQuery(this))):jQuery(".mapMarkerImage_wrap").slideUp()}),jQuery('button[id="clear-fields"]').click(function(){return jQuery("#search-report").is(":animated")?!1:(jQuery("#address_extras :input:not(input:checkbox)","div").val([]),void t("Cleared!","confirm"))}),jQuery(".map-icon").click(function(e){e.preventDefault();var o=jQuery(this).attr("title");jQuery("input#mapMarkerImage").val(parent.tinygmaps.pluginURI+"inc/tinymce/icons/"+o),p()}),jQuery(".fadeout").delay(2e3).fadeOut(800),jQuery('[data-tooltip !=""]').qtip({position:{my:"top-left"},content:{attr:"data-tooltip"}})});var v=document.getElementById("mapAddress"),f=new google.maps.places.Autocomplete(v),e=new google.maps.InfoWindow;n()}function processObject(e,o){for(var t="",n=0;n<o.length;n++){var a=o[n];a.types[0]==e?t=a.long_name:""}return t}function htmlEntities(e){return String(e).replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function clean_html(e){return e=String(e).replace(/'/g,'"'),jQuery.htmlClean(e,{removeTags:["script"],allowedAttributes:[["style"],["href",["a"]],["target",["a"]],["title",["a"]]],allowedTags:["p","a","span","ul","ol","li","br","hr","em","strong"],format:!1})}function get_info_bubble(e,o,t,n,a,l,r,c,i,s){var m=""!==e?"max-width: 150px; ":"max-width: 200px; ";return infowindowPlace='<div class="marker-inside"  style="hight:auto;" >',infowindowPlace+="<b>"+o+"</b>",infowindowPlace+="<table>",infowindowPlace+="<tbody>",infowindowPlace+="<tr>",infowindowPlace+="<td>",infowindowPlace+='<div class="infowidow-address" style="'+m+'" >',infowindowPlace+=null!==t&&void 0!==t&&""!==t?"<div>"+t+"</div>":"",infowindowPlace+=null!==n&&void 0!==n&&""!==n?"<div>"+n+", ":"<div>",infowindowPlace+=null!==a&&void 0!==a&&""!==a?a+"</div>":"</div>",infowindowPlace+=null!==l&&void 0!==l&&""!==l?"<div>"+l+"</div>":"</div>",infowindowPlace+=null!==r&&void 0!==r&&""!==r?"<div>"+r+"</div>":"</div>",infowindowPlace+=null!==c&&void 0!==c&&""!==c?"<div>"+c+"</div>":"",infowindowPlace+=null!==i&&void 0!==i&&""!==i?'<div style="max-width: 100%; white-space: nowrap; width: 100%; overflow: hidden;  -o-text-overflow: ellipsis;  text-overflow: ellipsis;"><a href="'+i+'" class="gmap_link" target="_blank" style="">'+i+"</a></div>":"",infowindowPlace+="</div>",infowindowPlace+="</td>",infowindowPlace+="<td>",infowindowPlace+=null!==e&&void 0!==e?'<img src="'+e+'" class="marker-icon" style="margin: 0 5px 15px 5px; width: 60px; height: auto; " />':"",infowindowPlace+="</td>",infowindowPlace+="</tr>",infowindowPlace+="</tbody>",infowindowPlace+="</table>",infowindowPlace+="</div>",infowindowPlace+=null!==s&&void 0!==s&&""!==s?'<div class="marker-extras" style="border-top: 1px dotted #949494; margin-top: 5px; max-width: 265px; min-height: 40px; overflow: hidden; white-space: pre-wrap;" >'+mapInfoWindowReturn+"</div>":""}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var lat=null,lng=null,mapZoomReturn=null,mapWidthReturn=null,mapHeightReturn=null,mapTypeReturn=null,mapControlsReturn=null,mapAddressReturn=null,mapAddressElement=null,locGooglePlaceID=null,mapMarkerReturn=null,mapMarkerImageReturn=null,infowindow=null,infowindowPlace=null,mapInfoWindowReturn=null,combinedInfoWindow=null,tinyGmaps=null,map=null,marker=null,mapOptions=null,mapCurrCenter=null,markerOutput=null,locPlace=null,markerCustom=parent.tinygmaps.pluginURI+"inc/tinymce/icons/music_folk_map.png";google.maps.event.addDomListener(window,"load",initialize),tinyGmaps={local_ed:"ed",init:function(e){tinyGmaps.local_ed=e,tinyMCEPopup.resizeToInnerSize()},insert:function e(o){seed_vars(),mapInfoWindowReturn=htmlEntities(mapInfoWindowReturn),mapInfoWindowReturn=jQuery.base64.encode(mapInfoWindowReturn),markerOutput="[TINYGMAPS ",markerOutput+='z="'+mapZoomReturn+'" ',markerOutput+='w="'+mapWidthReturn+'" ',markerOutput+='h="'+mapHeightReturn+'" ',1==mapControlsReturn?markerOutput+='hidecontrols="true" ':"",null==locGooglePlaceID||""==locGooglePlaceID?(markerOutput+='lat="'+lat+'" ',markerOutput+='lng="'+lng+'" ',""!==locName&&""!==locName?markerOutput+='name="'+htmlEntities(locName)+'" ':"",""!==locStreet&&""!==locStreet?markerOutput+='street="'+htmlEntities(locStreet)+'" ':"",""!==locCity&&""!==locCity?markerOutput+='city="'+htmlEntities(locCity)+'" ':"",""!==locRegion&&""!==locRegion?markerOutput+='region="'+htmlEntities(locRegion)+'" ':"",""!==locPostcode&&""!==locPostcode?markerOutput+='postcode="'+htmlEntities(locPostcode)+'" ':"",""!==locCountry&&""!==locCountry?markerOutput+='country="'+htmlEntities(locCountry)+'" ':"",""!==locWeb&&""!==locWeb?markerOutput+='website="'+locWeb+'" ':"",""!==locPhone&&""!==locPhone?markerOutput+='phone="'+htmlEntities(locPhone)+'" ':""):markerOutput+='placeid="'+locGooglePlaceID+'" ',""!==mapMarkerReturn&&""!==mapMarkerImageReturn?markerOutput+='marker="'+mapMarkerImageReturn+'" ':"",""!==mapMarkerReturn&&""!==mapInfoWindowReturn?markerOutput+='infowindowb64="'+mapInfoWindowReturn+'" ':"",markerOutput+="]",tinyMCEPopup.execCommand("mceReplaceContent",!1,markerOutput),tinyMCEPopup.close()}},tinyMCEPopup.onInit.add(tinyGmaps.init,tinyGmaps);